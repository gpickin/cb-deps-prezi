/*! Coldbox Dependency Management Prezi 23-04-2015 */
DiscusService=function(){},DiscusService.prototype.init=function(){if("undefined"==typeof angular)return console.log("Oops! AngularJS is not available."),!1;var a=angular.element("[ng-controller=cbDepsPrezi]").scope();"undefined"!=typeof a&&"undefined"!=typeof a.article_data&&$.getScript("//"+disqus_shortname+".disqus.com/embed.js",function(){console.log("Discus Loaded!")})},DiscusService.prototype.reset=function(a,b){DISQUS.reset({reload:!0,config:function(){this.page.identifier=a,this.page.url=b}})},DiscusService.prototype.loadComments=function(a,b,c){var d=this;window.DISQUS?d.reset(b,c):d.init(discus_shortname)},VideoService=function(){this.video_directory="/media/video",this.flowplayer_path="/includes/js/vendor/flowplayer/",this.scripts_loaded=!1,this.default_video={file:null,type:null,url:null,width:"100%",height:"inherit",path:null},this.current=this.default_video,this.vimeo={image_base_url:"//i.vimeocdn.com/video/"},this.youtube={image_base_url:"//img.youtube.com/vi/"}},VideoService.prototype.reset=function(){return this.current=this.default_video,this},VideoService.prototype.dimensions=function(a){var b=this;return"undefined"!=typeof a.width&&(b.current.width=a.width),"undefined"!=typeof a.height&&(b.current.height=a.height),b},VideoService.prototype.uri=function(a,b,c){var d=this;return"undefined"==typeof b&&(b="YouTube"),d.current.url=a,d.current.type=b,c?void c(d):d},VideoService.prototype.directory=function(a){return this.directory=a,this},VideoService.prototype.path=function(a){return this.set_from_path(a),this},VideoService.prototype.get_html=function(){var a=this;if(!a.current.path&&!a.current.url)throw"No file or uri provided A file path or URL must be set in order for the correct video paths to be provided";if(!a.current.type)throw"No type could be found The file type in the properties set for this class could not be determined (see path() & uri() methods)";switch(a.current.type){case"YouTube":return a.get_youtube_embed(a.current.url);case"Vimeo":return a.get_vimeo_embed(a.current.url);case"SWF":return a.SWF(a.current.path);case"FLV":return a.FLV();case"MPEG4|WebM|OOG":return a.html5_video()}},VideoService.prototype.get_video_image=function(a,b,c,d){var e=this;switch(e.current.type){case"Vimeo":e.get_vimeo_image(a,b,c,d);break;case"YouTube":e.get_youtube_image(a,b,c,d);break;default:d(null)}},VideoService.prototype.get_youtube_embed=function(a){var b=this;return video_id=b.get_youtube_id(a),video_id!=NULL?'         <div class="video youtube">         <iframe width="'+(b.width!=NULL?b.width:"520")+'" height="'+(b.height!=NULL?b.height:"310")+'" src="//www.youtube.com/embed/'+video_id+'?showinfo=0&color=white" frameborder="0" allowfullscreen></iframe>         </div>         ':"<!-- The Requested URL "+a+" could not be parsed to determine the correct YouTube video id -->"},VideoService.prototype.get_vimeo_embed=function(a){var b=this;return video_id=b.get_vimeo_id(a),video_id!=NULL?void 0:"<!-- The Requested URL "+a+" could not be parsed to determine the correct Vimeo video id -->"},VideoService.prototype.get_vimeo_image=function(a,b,c,d){var e=this;if(b||(b=1280),c||(c=!0),e.current.url=a,e.current.provider_id)var f=e.current.provider_id;else var f=e.get_vimeo_id(e.current.url);$.get("http://vimeo.com/api/v2/video/"+f+".json",function(a){if(a.length){var b=a[0].thumbnail_large;if(c)var e='<img src="'+b+'" alt="Video Thumbmnail Image" class="video-thumbnail"/>';else var e=b;if(!d)return e;d(e)}else{if(!d)return null;d(null)}},"json")},VideoService.prototype.get_youtube_image=function(a,b,c,d){var e=this;b||(b="maxresdefault"),c||(c=!0),e.current.url=a;var f=e.get_youtube_id(e.current.url);if(c)var g='<img src="'+e.youtube.image_base_url+f+"/"+b+'.jpg" alt="Video Thumbmnail Image" class="video-thumbnail"/>';else var g=e.vimeo.image_base_url+f+"/"+b+".jpg";return d?void d(g):g},VideoService.prototype.SWF=function(){unique_id="video_"+uniqid()},VideoService.prototype.FLV=function(){var a=this;unique_id="video_"+uniqid(),a.flowplayer_path="/behavior/jquery/flowplayer_flash/",a.scripts_loaded||(echo,'\n    <script type="text/javascript" src="'+a.flowplayer_path+'flowplayer-3.2.12.min.js"></script>\n    ',a.scripts_loaded=TRUE)},VideoService.prototype.MPEG4=function(){return this.html5_video()},VideoService.prototype.OOG=function(){return this.html5_video()},VideoService.prototype.WebM=function(){return this.html5_video(self.current.path,self.current.type)},VideoService.prototype.html5_video=function(){var a=this;return a.scripts_loaded||(document.write('\n    <style type="text/css">\n    @import url('+a.flowplayer_path+"skin/functional.css);\n    @import url("+a.flowplayer_path+'skin/custom.css);\n    </style>\n    <script type="text/javascript" src="'+a.flowplayer_path+'flowplayer.min.js"></script>       \n    '),a.scripts_loaded=TRUE),'     <div data-swf="'+a.flowplayer_path+'flowplayer.swf"     class="flowplayer no-toggle aside-time no-volume color-light"     data-ratio="0.416">     <video>     <source type="video/'+a.type.toLowerCase()+'" src="'+a.path+'"/>     </video>     '},VideoService.prototype.get_provider_id=function(a,b,c){var d=this;switch(id=null,b){case"YouTube":id=d.get_youtube_id(a);break;case"Vimeo":id=d.get_vimeo_id(a)}return c?void c(id):id},VideoService.prototype.get_youtube_id=function(a){var b=this;parsed=b.parse_url(a);var c=parsed.path.split("/"),d=c[c.length-1];if("undefined"!=typeof parsed.query){var e=parsed.query.split("&");for(var f in e)if(e[f].indexOf("v=")>-1){var g=e[f].split("=");return g=g[g.length-1]}}return d},VideoService.prototype.get_vimeo_id=function(a){var b=this;return parsed=b.parse_url(a),vid_id=parsed.path.split("/"),vid_id=vid_id[vid_id.length-1],"number"==typeof parseInt(vid_id)?vid_id:null},VideoService.prototype.parse_str=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=String(a).replace(/^&/,"").replace(/&/,"").split("&"),s=r.length,t=function(a){return decodeURIComponent(a.replace(/\+/g,"%20"))};for(b||(b=this.window),c=0;s>c;c++){for(l=r[c].split("="),m=t(l[0]),n=l.length<2?"":t(l[1]);" "===m.charAt(0);)m=m.slice(1);if(m.indexOf("\x00")>-1&&(m=m.slice(0,m.indexOf("\x00"))),m&&"["!==m.charAt(0)){for(p=[],o=0,d=0;d<m.length;d++)if("["!==m.charAt(d)||o){if("]"===m.charAt(d)&&o&&(p.length||p.push(m.slice(0,o-1)),p.push(m.substr(o,d-o)),o=0,"["!==m.charAt(d+1)))break}else o=d+1;for(p.length||(p=[m]),d=0;d<p[0].length&&(k=p[0].charAt(d),(" "===k||"+"===k||"["===k)&&(p[0]=p[0].substr(0,d)+"_"+p[0].substr(d+1)),"["!==k);d++);for(h=b,d=0,q=p.length;q>d;d++)if(m=p[d].replace(/^['"]/,"").replace(/['"]/,""),i=d!==p.length-1,g=h,""!==m&&" "!==m||0===d)h[m]===j&&(h[m]={}),h=h[m];else{e=-1;for(f in h)h.hasOwnProperty(f)&&+f>e&&f.match(/^\d+/g)&&(e=+f);m=e+1}g[m]=n}}},VideoService.prototype.parse_url=function(a,b){for(var c,d=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],e=this.php_js&&this.php_js.ini||{},f=e["phpjs.parse_url.mode"]&&e["phpjs.parse_url.mode"].local_value||"php",g={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},h=g[f].exec(a),i={},j=14;j--;)h[j]&&(i[d[j]]=h[j]);if(b)return i[b.replace("PHP_URL_","").toLowerCase()];if("php"!==f){var k=e["phpjs.parse_url.queryKey"]&&e["phpjs.parse_url.queryKey"].local_value||"queryKey";g=/(?:^|&)([^&=]*)=?([^&]*)/g,i[k]={},c=i[d[12]]||"",c.replace(g,function(a,b){a&&(i[k][a]=b)})}return delete i.source,i},VideoService.prototype.set_from_path=function(a,b){var c=this;if(c.current=c.default_video,exp_path=a.split("/"),0===a.indexOf("http")||0===a.indexOf("//"))c.current.url=a,a.indexOf("youtube")>-1?c.current.type="YouTube":a.indexOf("vimeo")>-1&&(c.current.type="Vimeo");else{c.current.file=exp_path[exp_path.length-1],exp_path.pop(),c.current.directory=exp_path.join("/")+"/",c.current.path=c.current.director+c.current.file;var d=c.current.file.split("+");d=d[d.length-1],c.current.type=d.toUpperCase()}b&&b(c)},cbDepsPrezi=function(){},cbDepsPrezi.init=function(){VidService=new VideoService,console.log("Video Service Ready!"),DiscusService=new DiscusService,DiscusService.init(),console.log("Application Javascript Ready!")},$(document).ready(function(){cbDepsPrezi.init()});